files:
  /etc/nginx/conf.d/https.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      # HTTPS Server

      server {
        listen 443 ssl;
        server_name localhost;

        ssl on;
        ssl_certificate /etc/pki/tls/certs/server.crt;
        ssl_certificate_key /etc/pki/tls/certs/server.key;

        ssl_session_timeout 5m;

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_prefer_server_ciphers on;

        location / {
          proxy_pass http://docker;
          proxy_http_version 1.1;

          proxy_set_header Connection "";
          proxy_set_header Host $host;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto https;
        }
      }

  /etc/pki/tls/certs/server.crt:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN CERTIFICATE-----
      MIID6TCCAtGgAwIBAgIUDOfpiawx+xOFFHV5G782Ul1Lcp8wDQYJKoZIhvcNAQEL
      BQAwbjELMAkGA1UEBhMCTkwxDTALBgNVBAcMBGNpdHkxDjAMBgNVBAoMBUxpa2U1
      MRAwDgYDVQQLDAdzZWN0aW9uMQ4wDAYDVQQDDAVMaWtlNTEeMBwGCSqGSIb3DQEJ
      ARYPbGlrZTVAZ21haWwuY29tMB4XDTIwMDYxNTIxMzMzMFoXDTIxMTAyODIxMzMz
      MFowbDELMAkGA1UEBhMCTkwxDTALBgNVBAcMBGNpdHkxDjAMBgNVBAoMBWxpa2U1
      MQ4wDAYDVQQLDAVsaWtlNTEOMAwGA1UEAwwFbGlrZTUxHjAcBgkqhkiG9w0BCQEW
      D2xpa2U1QGdtYWlsLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB
      APf9VFGoWbou7WC05Kk9kvoOdTOalUWHyvSzkFlE27BCOaJI6l1h8/DjGydMjZvz
      s3Q+70/3ksfRasPnbVTNzdsSfaEa96LGNBFALck0AnEud8vtnqfBkzq5WoJA635r
      hC9OwxzXU/JsauQu1eawXPhPvM7jxi655bsZktonTG1Y9ByOrWuhf5bg4bWD1Sl/
      Cx5Po9xlV2mmM8fFU1lI19frXO7ENJscs54ng5CKkIZu2npolwFzQAYiuShBBfHb
      5j0heywbLrhY2CFWzfKRrYASHI6A3nBNFMV/0+ncXMV79uBanr0ysd67SOT+//VU
      ffbemxunYpRiaDWArTsw5b8CAwEAAaOBgDB+MB8GA1UdIwQYMBaAFEoIE6Zjs2IN
      rMZ0wsN4qCKF7TbeMAkGA1UdEwQCMAAwCwYDVR0PBAQDAgTwMEMGA1UdEQQ8MDqC
      OGxpa2VpYW01LWVudi5lYmEtOGJ2bWpzbjMudXMtZWFzdC0yLmVsYXN0aWNiZWFu
      c3RhbGsuY29tMA0GCSqGSIb3DQEBCwUAA4IBAQAwWxOK59Ri77YRowJ1Q80P3Aga
      r/UA9t0Q1gqesUkUqndHXtIN52cr2avJZTZrjfHSOzHzEyMhIhX61DI97a4sPtOi
      pKNeh7wKUq/pHTMYw3+dvL15dZTToTt84YclAo0ARsR4U/+LHhF+1p8HnnzRNEHs
      GnwsnSkD9+qLDk/+H+DcFZvUUEPHt4vI6jyRx3tdtvxnRrliMsryVSYglQ7zq1hb
      wG/NFK70iVlU5kofXXUhJB5rQWOLNkdWf2kftGSvIKFygdCRb/kfDwRyWfGvdWKc
      1+3+Vqca5qNwUQ7Xp43yI665pCh6dQ8PAf/3tn/S+tDMRPFtiIjB5M7RjmQN
      -----END CERTIFICATE-----

  /etc/pki/tls/certs/server.key:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN RSA PRIVATE KEY-----
      jYHbH7KhPjF6/bn2tPzN7YYfyX9/CJ/63DxNLvbQtMvL1wgKwZuTGIq7orJbIz9x
      pFXGqA6VrW5ZqqPMNEzRFiWCJ30L3rnYGMoQBAuQabDcfIJiU+aPX8/tjADwvTpH
      zilVKL7ORFHGptAU9mxSAAb3q7de5qAsNgi5LnEPPIPsJPMC8tiqlGpYIZ8Ay8iQ
      ZHNV2m5FAnO7+FjCzx2qD3Ox5N1ob9u94v2OdZtgeph17Qm0rBmZggbrDQBoamae
      CD0Q1EfyACvC16oEDV9CYD02uJFyAL9fOgcfIVdG9n3pzjiL/KuVA1A4efkTWdvr
      q0OqF490VlmlHTz2uEFy8iFjUfqIP1U1Bim39t3ZzC0x4S/1qs+BtIp3NkgYZkOe
      GYj445XgjsYadbuF/SAFVULPOkg5OGL3QA2p3qlEM7Rz8v2E3wRWmnhhdPKCp/jp
      fuAmLAVFwk++3MfWSIH2lftDkyhsESk7wa01okgaWF//K1UkpSNjb5cwux4uWQRL
      zDlSiOZZSA0VTiV9x1wd3HL9uqviPBzG4KWMQvtpywFRkgWGwbRUc36YjCfFcDdF
      vGVYZJo9Z2naK4t0Q9GJOqchsyXdgx8ZmqxINk1VM8hLFaaWtpXK/w9zDOuB6EyY
      cFVqFpog39YQNIn05qr3af90cjoeBdIb0ttNsC+EHIL1g7V3nuyPrV0/zyNInn+L
      T+QMinwCYUYehmmHyOZsXAg/pz5xo77kP4gfysSB/Z8enTgkDxBZ/8VsDhTNQVpk
      FDa2kCxa8/PY2IY4gBXondJwmd8XGuqs+weWzXokBl+2KN24GzrQPK1ejIqBtr8c
      rPMyIDBhFm+e5kX9fRXK7/ZkESQzZascu2aFqqMIQ/pdHz7GRwPxJ9SFTJM6/yE2
      mZtz52cm/UUVRk9TKRbRTvp6QZzvxQH5ZzlU7QKX0XEwsN6suE0T81NeqQp+dlb/
      3mZVDB08+gGSnZqec2JzKx+XxZq2xS81ccDU+2yfJP4r1ywjeSA4pmpK8x2nmGTi
      D7GxumuBY1fBOnEjrlaRtq08CBxYVDgUohHcJ/L76sy8wFj7jSdKFppBG0kdTWHB
      OC6p/FCq880LkK+j/R5NIgg0TQ18uue62W3W57njYItKukFjx1VpsFxUGBKgWWuU
      XgoxgzL2WsQyQTJiB91H/HpKyT43q7Za4UIuPAPh3fO9u8R4XT1HbzyNpFk8xcQi
      6bOQWWJp43SfxozKJn2xgqMUDL+/2Oad0bM4UHa8NX5et/l++jF6zFzIy5QhR3Sb
      JlLKbXHilBgWtZmPnqsXy28FqEWLn1HGDy4P/kU+g1WJ5xjtKcLMGsPPh30AtxkY
      pVGrJN0HUYj/Dbke1hH8ymnC7b6t+UDiLDoMi2nKVfjsKfqut+dKq9TVdVEZs4PZ
      4POAwxTKOfGMc7C5UigRU74W6Fo1FXOV30oT6zxdI1CKer9EKzJUy3nPMxOVCv89
      +0xmvL+NC7OeX01K9+vDOUeGdLw2us0jJbNiLp2plHsR4XFF8wLZDGfJX14SWywI
      q2Pr82PJSsu5uZSab4Wbtv74+eqdXQvLXnPgMThPRVSGeNSSjtXVyg==
      -----END RSA PRIVATE KEY-----