files:
  /etc/nginx/conf.d/https.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      # HTTPS Server

      server {
        listen 443 ssl;
        server_name localhost;

        ssl on;
        ssl_certificate /etc/pki/tls/certs/server.crt;
        ssl_certificate_key /etc/pki/tls/certs/server.key;

        ssl_session_timeout 5m;

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_prefer_server_ciphers on;

        location / {
          proxy_pass http://docker;
          proxy_http_version 1.1;

          proxy_set_header Connection "";
          proxy_set_header Host $host;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto https;
        }
      }

  /etc/pki/tls/certs/server.crt:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN CERTIFICATE-----
      MIID6TCCAtGgAwIBAgIUDOfpiawx+xOFFHV5G782Ul1Lcp8wDQYJKoZIhvcNAQEL
      BQAwbjELMAkGA1UEBhMCTkwxDTALBgNVBAcMBGNpdHkxDjAMBgNVBAoMBUxpa2U1
      MRAwDgYDVQQLDAdzZWN0aW9uMQ4wDAYDVQQDDAVMaWtlNTEeMBwGCSqGSIb3DQEJ
      ARYPbGlrZTVAZ21haWwuY29tMB4XDTIwMDYxNTIxMzMzMFoXDTIxMTAyODIxMzMz
      MFowbDELMAkGA1UEBhMCTkwxDTALBgNVBAcMBGNpdHkxDjAMBgNVBAoMBWxpa2U1
      MQ4wDAYDVQQLDAVsaWtlNTEOMAwGA1UEAwwFbGlrZTUxHjAcBgkqhkiG9w0BCQEW
      D2xpa2U1QGdtYWlsLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB
      APf9VFGoWbou7WC05Kk9kvoOdTOalUWHyvSzkFlE27BCOaJI6l1h8/DjGydMjZvz
      s3Q+70/3ksfRasPnbVTNzdsSfaEa96LGNBFALck0AnEud8vtnqfBkzq5WoJA635r
      hC9OwxzXU/JsauQu1eawXPhPvM7jxi655bsZktonTG1Y9ByOrWuhf5bg4bWD1Sl/
      Cx5Po9xlV2mmM8fFU1lI19frXO7ENJscs54ng5CKkIZu2npolwFzQAYiuShBBfHb
      5j0heywbLrhY2CFWzfKRrYASHI6A3nBNFMV/0+ncXMV79uBanr0ysd67SOT+//VU
      ffbemxunYpRiaDWArTsw5b8CAwEAAaOBgDB+MB8GA1UdIwQYMBaAFEoIE6Zjs2IN
      rMZ0wsN4qCKF7TbeMAkGA1UdEwQCMAAwCwYDVR0PBAQDAgTwMEMGA1UdEQQ8MDqC
      OGxpa2VpYW01LWVudi5lYmEtOGJ2bWpzbjMudXMtZWFzdC0yLmVsYXN0aWNiZWFu
      c3RhbGsuY29tMA0GCSqGSIb3DQEBCwUAA4IBAQAwWxOK59Ri77YRowJ1Q80P3Aga
      r/UA9t0Q1gqesUkUqndHXtIN52cr2avJZTZrjfHSOzHzEyMhIhX61DI97a4sPtOi
      pKNeh7wKUq/pHTMYw3+dvL15dZTToTt84YclAo0ARsR4U/+LHhF+1p8HnnzRNEHs
      GnwsnSkD9+qLDk/+H+DcFZvUUEPHt4vI6jyRx3tdtvxnRrliMsryVSYglQ7zq1hb
      wG/NFK70iVlU5kofXXUhJB5rQWOLNkdWf2kftGSvIKFygdCRb/kfDwRyWfGvdWKc
      1+3+Vqca5qNwUQ7Xp43yI665pCh6dQ8PAf/3tn/S+tDMRPFtiIjB5M7RjmQN
      -----END CERTIFICATE-----

  /etc/pki/tls/certs/server.key:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN PRIVATE KEY-----
      MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQD3/VRRqFm6Lu1g
      tOSpPZL6DnUzmpVFh8r0s5BZRNuwQjmiSOpdYfPw4xsnTI2b87N0Pu9P95LH0WrD
      521Uzc3bEn2hGveixjQRQC3JNAJxLnfL7Z6nwZM6uVqCQOt+a4QvTsMc11PybGrk
      LtXmsFz4T7zO48YuueW7GZLaJ0xtWPQcjq1roX+W4OG1g9UpfwseT6PcZVdppjPH
      xVNZSNfX61zuxDSbHLOeJ4OQipCGbtp6aJcBc0AGIrkoQQXx2+Y9IXssGy64WNgh
      Vs3yka2AEhyOgN5wTRTFf9Pp3FzFe/bgWp69MrHeu0jk/v/1VH323psbp2KUYmg1
      gK07MOW/AgMBAAECggEAMyXX10O+xezZ3uFQbCub/eEvgSY39XBNhuzmL9NI8HCo
      THV3iS0j0CI3PoLGjkzUTXyRhU/NwVLLD37TCPOtqqqEqM7UFomEwa4YA3CrtEZe
      RPxMhdMiF7GVHlpfd+KbD9rR2Uf8M3rzDP8v9PWZJ0ni6lUGUirbXBypMj96vu56
      8vACfFzWYtgWWP+Y3lX2bWG81ZIfV5+pIozaH9mbhEEf1MOuaGexoM6YkpRVIGBh
      HzidJSJ2HhrQveNkVSRzHZsD+B/5JAPHLlhzpEKT9JDzuEQ7QVpTU/YasUx7rkZU
      3JAY7Zyy0t24KviO23MtXP3AX9dZUq+gtzR9kVdYIQKBgQD85SGa+5LnCWpNACso
      Q76L6OFuePBLi24eqzkTWWcOKCMI0u75dpLKmntl5wcBLKBUVhrJLJpHGx0eX9fh
      LaDjaWK2Ea+mWwTPKUzaq7vGMNClr3LV26PI3yxPKYLNbEb1eKkyxu6KSNuXhmtZ
      a9yfVpR5qEdku2Ox3n8fBS2aMQKBgQD7CMehfyoP+EB8tf3KAhaKsr9byosrPGwT
      LPy8TXYwEvk1csqo5KyRcweyv18Wu6yrnGbfWtlnNW9YN6zsKpTkJQxfHQjkipz8
      G14Fcdxu971lgAAVnmKQn9OhGHhf0N04WXOdNYyDQk3cbIVpXQ4sidg0eSgZYmsJ
      ULbiBQ6S7wKBgQDykKPnD54b1EANkzfR6wh9EeYIHB//lcEN0ZVxJbNfNMhF0mw9
      AqpRglMRrsJdMfymZ+BRTWK9CRio5a0e4rEK7y4rDFO58FtwiGCa7VWyB2hZQyuW
      TJGQPd82Hs7DUjPNhupjNcPfB3r4n4mfv4Fho53OAsZXrBU3qf2sNz9CQQKBgFPy
      j6+18r78abRKt+AB6r/fHpb3mKqQviN7e9kMnmVdMvFovdTVA9BwAzcHQCk+AXQy
      DUTMAL++4slBdRZU9w2ERirYbszefbjg/gQcG3cQacmzkFOqb5OlnwPURwzjr9bU
      MxFzgtWyKo93yvV9JOxH/IEvsvUqMFkhIMdcoY8JAoGAWmHRSBg39jbiTZlhOPR0
      NbCG2vIMamqP5LznQjfBYLIdT0m6+U7S0UHzvJhwacWNEy2GEPovR7b3MdOvLdMS
      YAJvXhig5wnQ9X0MV/19a159KloDXGBlltq0bfv136I6XvHVG9PREfR60iZnUAOA
      jd9GzpB4JocHgRZvg7jB9hM=
      -----END PRIVATE KEY-----